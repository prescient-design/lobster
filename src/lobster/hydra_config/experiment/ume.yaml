# @package _global_

defaults:
  - override /model: modern_bert.yaml
  - override /data: ume
  - override /callbacks: [base, moleculeace_linear_probe]

data:
  root: ${paths.root_dir}/data
  batch_size: 16
  tokenizer_max_length: ${model.max_length}

paths:
  root_dir: ~/Desktop/code/lobster/dev
  
trainer:
  max_steps: 50_000
  val_check_interval: 1_000
  precision: 16-mixed
  gradient_clip_val: 0.5
  accumulate_grad_batches: 8
  max_time: "00:24:00:00"

model:
  max_length: 512
  num_warmup_steps: 1_000
  num_training_steps: ${trainer.max_steps}
  lr: 4e-4
  mask_percentage: 0.25
  beta1: 0.9
  beta2: 0.98
  eps: 1e-12

callbacks:
  moleculeace_linear_probe:
    max_length: ${model.max_length}
  run_every_n_epochs: null

logger:
  name: ume_smiles_m320m_${now:%Y-%m-%d_%H-%M-%S}